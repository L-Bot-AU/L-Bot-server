<!-- use macros: https://www.webforefront.com/django/createreusablejinjatemplates.html-->
{% extends 'base.html' %}

{% block page_title %}Home{% endblock %}

{% block page_content %}
	{% import "homedata.html" as homedata %}
	<button type="button" class="focusbtn" onclick="setFocus('jnrtab')">Junior</button>
	<button type="button" class="focusbtn" onclick="setFocus('snrtab')">Senior</button>
	<div class="tabline"></div>
	<table class="tabwrapper">
		<tr valign="top">
			{% for lib in ["jnr", "snr"] %}
			<th class="{{ lib }}tab">
				<div class="alert" id="{{ lib }}Alert">
					<span>âš </span>
					<span id="{{ lib }}Alerttext">...</span>
					<span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
				</div>
				<div class="status">
					<span id="{{ lib }}Status">...:</span>
					~<span id="{{ lib }}Remaining">...</span>
					spots remaining
				</div>
				<div class="progress">
					<div class="progress-bar" style="width: 0%"><div id="{{ lib }}Fullness">0% full</div></div>
				</div>
				<div class="title">EXPECTED USAGE</div>
				{{ homedata.today(lib) }}
				
				<div class="title">PAST TRENDS</div>
				{{ homedata.pasttrends(lib) }}
			</th>
			{% endfor %}
		</tr>
	</table>
	{{ homedata.scripts() }}
	
	<script>
		function setFocus(newFocus) {
			localStorage["focusLibrary"] = newFocus;
			if (newFocus == "snrtab") {
				document.getElementsByTagName("body")[0].classList.add("focusright");
			}
			else {
				document.getElementsByTagName("body")[0].classList.remove("focusright");
			}
		}
		if (localStorage["focusLibrary"] === undefined) {
			localStorage["focusLibrary"] = "jnrtab";
		}
		setFocus(localStorage["focusLibrary"]);
	</script>
{% endblock %}
