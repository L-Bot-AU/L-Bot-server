<!-- use macros: https://www.webforefront.com/django/createreusablejinjatemplates.html-->
{% extends 'base.html' %}

{% block page_title %}Home{% endblock %}

{% block page_content %}
	{% import "homedata.html" as homedata %}
	<style>
		.focusbtn {
			padding: 0px 15px;
			background-color: transparent;
			border: none;
			font-size: 20px;
			font-weight: 800;
		}
		.focusbtn:focus {
			outline: none;
		}
		
		.tabwrapper {
			width: 180vw;
			position: absolute;
			transition-duration: 0.8s;
			transform: translate(0%);
			margin-top: 10px;
		}
		.jnrtab {
			width: 90vw;
			opacity: 1;
			transition:opacity 0.8s linear;
		}
		.snrtab {
			width: 90vw;
			opacity: 0;
			transition:opacity 0.8s linear;
		}
		.tabline {
			position: absolute;
			height: 2px;
			width: 70px;
			background-color: var(--txt-primary-col);
			left: calc(50% - 82px);
		}
		
		.focusright .tabwrapper {
			transform: translate(-50%);
		}
		.focusright .jnrtab {
			opacity: 0;
			transition:opacity 0.8s linear;
		}
		.focusright .snrtab {
			opacity: 1;
			transition:opacity 0.8s linear;
		}
		.focusright .tabline {
			left: calc(50% + 8px);
		}
		
		.alert {
			width: 90%;
			margin: auto;
			margin-top: 15px;
			color: white;
			background-color: red;
			border-radius: 10px;
			padding: 15px;
			font-size: 20px;
		}
		
		.closebtn {
		  color: white;
		  font-weight: 900;
		  float: right;
		  font-size: 40px;
		  line-height: 0px;
		  cursor: pointer;
		  transition: 0.3s;
		  padding: 10px;
		}
		.closebtn:hover {
		  color: black;
		}
		
		.progress {
			width: 90%;
			margin: auto;
			margin-top: 10px;
			height: 75px;
			border-radius: 20px;
			font-size: 30px;
			border: 2px solid var(--border-colour);
			background-color: var(--bg-primary-col);
		}
		
		.progress-bar {
			color: var(--txt-col);
			background-color: var(--nav-primary-col);
		}
		
		.status {
			font-size: 30px;
			text-align: center;
			margin: 20px 0px;
		}
		
		.title {
			font-size: 45px;
			text-align: center;
			padding: 20px;
		}
		#jnrFullness {
			padding-left: 15px;
			margin: auto;
		}
		#snrFullness {
			padding-left: 15px;
			margin: auto;
		}
	</style>
	<button type="button" class="focusbtn" onclick="setFocus('jnrtab')">Junior</button>
	<button type="button" class="focusbtn" onclick="setFocus('snrtab')">Senior</button>
	<div class="tabline"></div>
	<table class="tabwrapper">
		<tr valign="top">
			{% for lib in ["jnr", "snr"] %}
			<th class="{{ lib }}tab">
				<div class="alert" id="{{ lib }}Alert">
					<span>âš </span>
					<span id="{{ lib }}Alerttext">...</span>
					<span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
				</div>
				<div class="status">
					<span id="{{ lib }}Status">...:</span>
					~<span id="{{ lib }}Remaining">...</span>
					spots remaining
				</div>
				<div class="progress">
					<div class="progress-bar" style="width: 0%"><div id="{{ lib }}Fullness">0% full</div></div>
				</div>
				<div class="title">EXPECTED USAGE</div>
				{{ homedata.today(lib) }}
				
				<div class="title">PAST TRENDS</div>
				{{ homedata.pasttrends(lib) }}
			</th>
			{% endfor %}
		</tr>
	</table>
	{{ homedata.scripts() }}
	
	<script>
		function setFocus(newFocus) {
			localStorage["focusLibrary"] = newFocus;
			if (newFocus == "snrtab") {
				document.getElementsByTagName("body")[0].classList.add("focusright");
			}
			else {
				document.getElementsByTagName("body")[0].classList.remove("focusright");
			}
		}
		if (localStorage["focusLibrary"] === undefined) {
			localStorage["focusLibrary"] = "jnrtab";
		}
		setFocus(localStorage["focusLibrary"]);
	</script>
{% endblock %}
